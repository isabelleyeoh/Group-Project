{% extends '_layout.html' %}

{% block header %}
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
    integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

{% endblock %}

{% block content %}
<div id="fb-root"></div>
<script async defer crossorigin="anonymous"
    src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v3.2&appId=432097757527438&autoLogAppEvents=1"></script>


<div class='container'>
    <div class='col-6 offset-3 jumbotron registration mt-4'>
        <div>
            <legend class='text-center'>
                <h1>Sign In</h1>
            </legend>

            <div class="fb-login-button" data-size="large" data-button-type="login_with" data-auto-logout-link="false"
                data-use-continue-as="false"></div>

            <a href="{{ url_for('sessions.google_form') }}">
                <button class="loginBtn loginBtn--google">
                    Log in with Google
                </button>
            </a>
        </div>

        <div>OR</div>

        <form action="{{ url_for('sessions.check') }}" method="POST">


            <!--=======EMAIL ADDRESS =======-->
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1"><i class="far fa-envelope"></i></span>
                </div>
                <input type="text" class="form-control" placeholder="Email address" name="email"
                    aria-describedby="basic-addon1">
            </div>

            <!--=======PASSWORD =======-->
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1"><i class="fas fa-lock"></i></i></span>
                </div>
                <input type="password" class="form-control" placeholder="Password" name="password"
                    aria-describedby="basic-addon1">
            </div>

            <!--=======SUBMIT =======-->


            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" /><br>
            <button type='submit' class='btn btn-primary col-12 form-group'>SignIn</button>
            <p class='text-center'>Don't have an accont? <a href="{{ url_for('sessions.new', usertype=usertype) }}">Sign
                    Up</a></p>
        </form>




    </div>

</div>


<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: '432097757527438',
            cookie: true,
            xfbml: true,
            version: 'v3.2'
        });

        FB.AppEvents.logPageView();

    };

    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));


    FB.getLoginStatus(function (response) {
        statusChangeCallback(response);
    });

    function checkLoginState() {
        FB.getLoginStatus(function (response) {
            statusChangeCallback(response);
        });
    }

</script>


{% endblock %}